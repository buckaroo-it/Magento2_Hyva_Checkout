<?php

declare(strict_types=1);
/** @var Escaper $escaper */
/** @var \Buckaroo\HyvaCheckout\Magewire\Checkout\Payment\Method\Creditcards $magewire */

use Magento\Framework\Escaper;

?>
<div class="col-span-6">

    <form x-data="buckarooCreditcards" novalidate>
        <div class="flex flex-col gap-y-2 field field-reserved">
            <label id="cc-name-label" for="cc-name-wrapper">
                <?= $escaper->escapeHtml(__('Cardholder Name:')); ?>
                <span class="text-red-600">*</span>
            </label>
            <div id="cc-name-wrapper"
                 class="shadow h-12 appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div id="cc-name-error" class="text-red-600 text-sm"></div>
        </div>

        <div class="flex flex-col gap-y-2 field field-reserved">
            <label id="cc-number-label" for="cc-number-wrapper">
                <?= $escaper->escapeHtml(__('Card Number:')); ?>
                <span class="text-red-600">*</span>
            </label>
            <div id="cc-number-wrapper"
                 class="shadow h-12 appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
            </div>
            <div id="cc-number-error" class="text-red-600 text-sm"></div>
        </div>

        <div class="field field-reserved">
            <div class="flex gap-x-2 gap-y-2">
                <div class="flex flex-col w-7/12">
                    <label id="cc-expiry-label" for="cc-expiry-wrapper">
                        <?= $escaper->escapeHtml(__('Expiry Date:')); ?>
                        <span class="text-red-600">*</span>
                    </label>
                    <div id="cc-expiry-wrapper"
                         class="shadow h-12 appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div id="cc-expiry-error" class="text-red-600 text-sm"></div>
                </div>

                <div class="flex flex-col w-5/12">
                    <label id="cc-cvc-label" for="cc-cvc-wrapper" class="flex items-center">
                        <?= $escaper->escapeHtml(__('CVC / CVV:')); ?>
                        <span class="text-red-600">*</span>
                        <div class="relative inline-block ml-1 cvc-tooltip-container">
                             <button type="button" class="text-gray-400 hover:text-gray-600 focus:outline-none cvc-tooltip-trigger"
                                     @click.prevent>
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                            <div class="cvc-tooltip absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-64 opacity-0 invisible transition-all duration-200">
                                <?= $escaper->escapeHtml(__('The CVC/CVV code is a 3 or 4-digit security code on your credit card.')); ?>
                                <div class="absolute top-full left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"></div>
                            </div>
                        </div>
                    </label>
                    <div id="cc-cvc-wrapper"
                         class="shadow h-12 appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                    </div>
                    <div id="cc-cvc-error" class="text-red-600 text-sm"></div>
                </div>
            </div>
        </div>

        <div class="field">
            <span><?= $escaper->escapeHtml(__('Please make sure all fields are filled in correctly before proceeding.')); ?></span>
            <a class="text-gray-500 hover:text-gray-800 float-right ml-2" href="#" @click.prevent="resetHostedFields"><?= $escaper->escapeHtml(__('Clear')); ?></a>
        </div>

        <div x-show="oauthTokenError" class="field text-red-600 text-sm" x-text="oauthTokenError"></div>
        <div x-show="paymentError" class="field text-red-600 text-sm" x-text="paymentError"></div>
    </form>
</div>

