<?php

declare(strict_types=1);
/** @var Escaper $escaper */
/** @var \Buckaroo\HyvaCheckout\Magewire\Checkout\Payment\Method\Creditcards $magewire */

use Magento\Framework\Escaper;

?>
<div class="col-span-6">

    <form x-data="buckaroo.credicards($el)" x-init="register()" novalidate>
        <div class="flex flex-col gap-y-2 field field-reserved">
            <label for="buckaroo_creditcards_card_holder">
                <?= $escaper->escapeHtml(__('Name on card:')); ?>
                <span class="text-red-600">*</span>
            </label>
            <input type="text"
            x-model="cardHolder"
            data-validate='{"bk-validateCardHolderName": true}'
            @change="onChange" id="buckaroo_creditcards_card_holder"
            name="buckaroo_creditcards_card_holder"
            placeholder="<?= $escaper->escapeHtml(__('John Doe')); ?>" />
        </div>

        <div class="flex flex-col gap-y-2 field field-reserved">
            <label for="buckaroo_creditcards_card_number">
                <?= $escaper->escapeHtml(__('Card number:')); ?>
                <span class="text-red-600">*</span>
            </label>
            <div class="relative w-full">
                <input
                    type="text"
                    class="w-full"
                    maxlength="23"
                    x-model="cardNumber"
                    data-validate='{"bk-validateCardNumber": true}'
                    @change="onChange" id="buckaroo_creditcards_card_number"
                    name="buckaroo_creditcards_card_number"
                    placeholder="<?= $escaper->escapeHtml(__('0000 0000 0000 0000')); ?>"
                />
                <div class="absolute inset-y-0 right-3 flex items-center pr-3">
                    <img :src="getIssuerImage()" :alt="cardNumber" style="height: 100%;padding: 10px 0;">
                </div>

            </div>
        </div>
        <div class="field field-reserved">
            <div class="flex gap-x-2 gap-y-2">
                <div class="flex flex-col w-7/12">
                    <label for="buckaroo_creditcards_card_expiration">
                        <?= $escaper->escapeHtml(__('Expiration:')); ?>
                        <span class="text-red-600">*</span>
                    </label>
                    <input type="text"
                        maxlength="5"
                        x-model="cardExpiration"
                        data-validate='{"bk-ValidateYear": true, "bk-ValidateMonth": true}'
                        @change="onChange" id="buckaroo_creditcards_card_expiration"
                        name="buckaroo_creditcards_card_expiration"
                        placeholder="<?= $escaper->escapeHtml(__('MM/YY')); ?>"
                    />
                </div>

                <div class="flex flex-col w-5/12">
                    <label for="buckaroo_creditcards_card_cvc">
                        <?= $escaper->escapeHtml(__('CVC / CVV:')); ?>
                        <span class="text-red-600">*</span>
                    </label>
                    <input
                        type="text"
                        x-model="cardCvc"
                        maxlength="4"
                        data-validate='{"bk-validateCardCvc": true}'
                        @change="onChange" id="buckaroo_creditcards_card_cvc"
                        name="buckaroo_creditcards_card_cvc"
                        placeholder="<?= $escaper->escapeHtml(__('123')); ?>"
                    />
                </div>
            </div>
        </div>
    </form>
</div>
